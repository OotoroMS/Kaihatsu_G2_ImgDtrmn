# 概要
開発コード「Prometheus」
これは2024年度開発課題Gr2の外観検査用プログラムである。

## 性能目標
・20個のワーク検査に、30分
・0.5mm単位での傷検出
！様々なワークへの対応

## 機能の大まかな仕様
大きく分けて以下の機能を持つ
・機構全体での稼働
・PC単体でのモデル等の性能テスト
これら二つの機能について、以下に詳しく説明する

## 技術的な仕様
外観検査、つまりは画像での傷の有無判別に当たり、AutoEncoderモデルを使用している。
判別したい対象のサイズや目標とする検出精度にもよるが、大体20MB程度のメモリ消費量で済む。
Core i7 12th U付でおおよそ1.2~3secほどで検査は終了する。


# 機構全体での稼働
この機能では、前提条件として、概観判別機構が完成しており、PLCとの通信等も実現されている状態で動作させることとなる。
この機能には、「通常稼働」「トレーニング用画像撮影」の二つに大きく分けられる。

## 通常稼働
その名の通り、検査をしたいときに使用するモードである。
通常稼働にも、複数のモードが存在する。
まずは検査モードであり、これが検査装置としてその目的を果たす仕事をする。つまりはワーク搬入命令を受け取ったら、判別、結果を送信までを行うことができる。
もう一つはメンテナンスモードであり、これは検査装置のメンテナンスを行うときに使用する。各種アクチュエータが正常に動いているかなどを確認する。

## トレーニング用画像撮影
AutoEncoderモデルのトレーニング用に学習画像を撮影する。通常稼働での撮影よりもより細かく撮影し、学習素材を多く取得する。
なお、回転や拡大縮小は、これほどの精度を求められるワークに対しては悪影響と思われるので、行っていない。各自で取得した画像を加工して使用することとなる
ここで取得した画像を、検査装置内のPCでトレーニングすることは現実的ではない。別途CUDAに対応したGPUを用意し、トレーニングすることを推奨する。
メモリサイズは32GBあるため、トレーニングすることはできないことは無いが、2週間か数か月トレーニングにかかるので、無駄な試みとケチな思想であるであると断言する。
可能であればこのPCをネットワークに接続し、Azure等クラウドサービスのDockerコンテナ上にトレーニング環境を構築し、実行することをお勧めする


# PC単体でのモデル等の性能テスト
このモードは機構が完成していないとき、又は実物が存在しないが、データ上で検査の可能性を知りたいとき、モデルの評価をしたいときに使用する。
トレーニングしたモデルの適切な閾値の判断、又は様々な閾値を基にしたモデルの性能、良品不良品の正答率などを知ることができる。
